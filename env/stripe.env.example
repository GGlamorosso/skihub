# CrewSnow Stripe Configuration - Week 7
# Copy to .env and fill with your actual Stripe keys

# ============================================================================
# STRIPE API KEYS
# ============================================================================

# Secret key (server-side only, never expose in client)
STRIPE_SECRET_KEY=sk_test_51...your_secret_key_here
STRIPE_SECRET_KEY_LIVE=sk_live_51...your_live_secret_key

# Publishable key (safe to expose in client applications)  
STRIPE_PUBLISHABLE_KEY=pk_test_51...your_publishable_key
STRIPE_PUBLISHABLE_KEY_LIVE=pk_live_51...your_live_publishable_key

# Webhook secret for signature verification
STRIPE_WEBHOOK_SECRET=whsec_...your_webhook_secret
STRIPE_WEBHOOK_SECRET_LIVE=whsec_...your_live_webhook_secret

# ============================================================================
# PRODUCT IDs (Generated by stripe/products-setup.js)
# ============================================================================

# Premium Subscriptions
STRIPE_PRODUCT_PREMIUM=prod_...generated_product_id
STRIPE_PRICE_PREMIUM_MONTHLY=price_...monthly_price_id
STRIPE_PRICE_PREMIUM_SEASONAL=price_...seasonal_price_id

# Boosts
STRIPE_PRODUCT_DAILY_BOOST=prod_...boost_product_id  
STRIPE_PRICE_DAILY_BOOST=price_...daily_boost_price
STRIPE_PRICE_WEEKLY_BOOST=price_...weekly_boost_price
STRIPE_PRICE_MULTI_STATION_BOOST=price_...multi_station_price

# Extra Swipes
STRIPE_PRODUCT_SWIPE_PACK=prod_...swipe_pack_product
STRIPE_PRICE_SMALL_SWIPE_PACK=price_...small_pack_price
STRIPE_PRICE_LARGE_SWIPE_PACK=price_...large_pack_price

# ============================================================================
# USAGE QUOTAS CONFIGURATION
# ============================================================================

# Free tier limits
FREE_TIER_DAILY_LIKES=20
FREE_TIER_DAILY_MESSAGES=50

# Premium tier (unlimited represented as high number)
PREMIUM_TIER_DAILY_LIKES=999999
PREMIUM_TIER_DAILY_MESSAGES=999999

# Boost tier limits
BOOST_TIER_DAILY_LIKES=50
BOOST_TIER_DAILY_MESSAGES=100

# ============================================================================
# WEBHOOK CONFIGURATION
# ============================================================================

# Webhook endpoint URL (for Stripe Dashboard configuration)
WEBHOOK_URL_DEV=https://your-project-dev.supabase.co/functions/v1/stripe-webhook-enhanced
WEBHOOK_URL_PROD=https://your-project.supabase.co/functions/v1/stripe-webhook-enhanced

# Events to listen for in Stripe Dashboard:
# - checkout.session.completed
# - invoice.paid
# - invoice.payment_failed  
# - customer.subscription.created
# - customer.subscription.updated
# - customer.subscription.deleted

# ============================================================================
# PRICING CONFIGURATION
# ============================================================================

# Premium pricing (in cents)
PREMIUM_MONTHLY_PRICE_CENTS=999    # €9.99
PREMIUM_SEASONAL_PRICE_CENTS=2999  # €29.99

# Boost pricing (in cents)
DAILY_BOOST_PRICE_CENTS=299        # €2.99
WEEKLY_BOOST_PRICE_CENTS=999       # €9.99
MULTI_STATION_BOOST_PRICE_CENTS=1999 # €19.99

# Swipe pack pricing (in cents)
SMALL_SWIPE_PACK_PRICE_CENTS=199   # €1.99
LARGE_SWIPE_PACK_PRICE_CENTS=499   # €4.99

# Default currency
DEFAULT_CURRENCY=eur

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable/disable quota enforcement
QUOTA_ENFORCEMENT_ENABLED=true
QUOTA_GRACE_PERIOD_ENABLED=true

# Enable/disable specific features
PREMIUM_FEATURES_ENABLED=true
BOOST_FEATURES_ENABLED=true
SWIPE_PACKS_ENABLED=true

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=1000

# ============================================================================
# MONITORING AND ANALYTICS
# ============================================================================

# Enable usage analytics
USAGE_ANALYTICS_ENABLED=true

# Quota warning thresholds (percentage)
QUOTA_WARNING_THRESHOLD_LIKES=80    # Warn at 80% of daily limit
QUOTA_WARNING_THRESHOLD_MESSAGES=90 # Warn at 90% of daily limit

# Conversion tracking
CONVERSION_TRACKING_ENABLED=true

# ============================================================================
# ENVIRONMENT SPECIFIC
# ============================================================================

# Environment (development/staging/production)
ENVIRONMENT=development

# Enable debug logging for Stripe
STRIPE_DEBUG=false

# Enable debug logging for quotas
QUOTA_DEBUG=true
